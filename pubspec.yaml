name: ipbc_monorepo
environment:
  sdk: '>=3.8.1 <4.0.0'

workspace:
  - apps/ipbc_mobile
  - apps/ipbc_web
  - packages/auth_module
  - packages/core_module
  - packages/events_module
  - packages/home_module
  - packages/lyric_module
  - packages/offers_module
  - packages/service_module

dev_dependencies:
  melos: ^7.0.0-dev.8

melos:
  scripts:
    build-appbundle:
      run: melos exec --scope=ipbc_mobile -- flutter build appbundle --release
      description: Gera o bundle android para colocar na loja
    build-apk:
      run: melos exec --scope=ipbc_mobile -- flutter build apk --release
      description: Gera o apk android
    sc-clean:
      run: melos exec -- bash ../../flutter_clean_all.sh
      description: Executa o arquivo para limpar e baixar dependencias de todos os modulos
    sonar-all:
      run: melos exec --file-exists="sonar-project.properties" -- bash ../../sonar.sh
      description: Executa o sonar.sh em cada mÃ³dulo com sonar-project.properties
    build-web:
      run: melos exec --scope=ipbc_web -- flutter build web --release
      description: Gera os arquivos para colocar no servidor web